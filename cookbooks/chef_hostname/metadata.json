{"name":"chef_hostname","version":"0.6.0","description":"Configures the hostname on a node","long_description":"# chef_hostname Cookbook\n\nSets the node's hostname\n\n- resource-driven cookbook\n- supports FQDNs as hostnames\n- persists after a reboot\n- reloads ohai\n- runs at compile-time (no need to use lazy)\n- fixes up /etc/hosts so node[\"fqdn\"] works\n- runs nearly everywhere\n- supports hostnamectl from systemd\n- not tied to any other sysctl/etc-hosts cookbook dependecies\n\n## Motivation\n\n- Make strong guarantees that `node[\"fqdn\"]` in other recipes \"just works\"\n- No need to `lazy { node[\"fqdn\"] }`\n- Be very portable\n\n## Requirements\n\n## Platforms\n\n- Ubuntu/Debian (and derivatives like Mint/Raspbian)\n- RHEL/CentOS/Scientific/Oracle/Fedora (and derivatives like Pidora)\n- OpenSUSE/SLES\n- FreeBSD/OpenBSD/NetBSD\n- Docker Containers\n- MacOS\n- Solaris\n- Gentoo\n- Arch\n- Cisco Nexus\n- Windows <-- currently a bit of a lie\n\nBecause of the way that this cookbook \"Duck Types\" the operating system, many systems that are not listed above have a decent chance of working out of the box provided that they implement a common pattern.\n\n### Chef\n\n- Chef 12.7+\n\n### Cookbooks\n\n- none\n\n## Custom Resources\n\nhostname Sets the hostname, ensures that reboot will preserve the hostname, re-runs the ohai plugin to set the node data.\n\n### Actions\n\n- :set: Ses the hostname\n\n### Properties\n\n- hostname: hostname to set\n- compile_time: defaults to running at compile time, set to false to disable\n\n### Chefspec / Testing\n\nThe action to be used in Chefspec/tests is \"set\" for exmaple:\n\n```ruby\n      it 'checks if hostname is being set' do\n        expect(chef_run).to set_hostname('your.hostname.com')\n      end\n```\n\n## Examples\n\nSetting hostname to a string:\n\n```ruby\nhostname \"foo.example.com\"\n```\n\nSetting hostname to the node name:\n\n```ruby\nhostname node.name\n```\n\nSetting hostname to whatever attribute you like:\n\n```ruby\nhostname node['set_fqdn']\n```\n\nThere is no need to \"lazy\" arguments to templates and filenames when this is used since it forces itself to run at compile-time.\n\n```ruby\nhostname node.name\n\n# node[\"fqdn\"] will be set here at compile time\ntemplate \"/etc/motd\" do\n  source \"motd.erb\"\n  variables({\n    fqdn: node[\"fqdn\"]\n  })\nend\n\n# /bin/hostname will be set here at compile time\nmyhostname = `/bin/hostname`\n\nfile \"/etc/issue\" do\n  content myhostname\nend\n```\n\nThe hostname resource will drop a line into /etc/hosts so that the `node[\"fqdn\"]` can be resolved correctly, and will re-trigger ohai. The default is to use the node[\"ipaddress\"]` value for the ipaddress on the /etc/hosts line. In order to override it:\n\n```ruby\nhostname node[\"cloud\"][\"public_hostname\"]\n  ipaddress node[\"cloud\"][\"public_ipv4\"]\nend\n```\n\nIn order to override the editing of the /etc/hosts file pass nil for the ipaddress (note that if you edit the /etc/hosts file you will be responsible for also reloading the ohai plugin and you will want to do both at compile-time yourself in order for `node[\"fqdn\"]` to resolve)\n\n```ruby\nhostname node.name\n  ipaddress nil\nend\n```\n\nAliases can also be added to the line that hostname adds to /etc/hosts:\n\n```ruby\nhostname node.name\n  ipaddress \"259.1.1.1\"\n  aliases [ \"klowns.car.local\", \"yolo\" ]\nend\n```\n\n## Notes\n\nThere are no recipes in this cookbook, the resource is meant to be used in your own custom recipes. There are no attributes in this cookbook, you can drive the resource off of whatever attribute(s) you like.\n\nDocker container hostnames do not persist after restarts due to limitations of docker.\n\n## TODO\n\n- fix setting node['fqdn'] correctly on windows\n- aix\n- xenserver (probably already supported via RHEL)\n- test: exherbo, alpine, slackware, rapsbian, pidora\n- smartos, omnios, openindiana, opensolaris, nexentacore?\n\n## License & Authors\n\n```\nAuthor:: Lamont Granquist (<lamont@chef.io>)\n\nCopyright:: 2016-2016, Chef Software, Inc\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n```\n","maintainer":"Chef Software, Inc.","maintainer_email":"cookbooks@chef.io","license":"Apache-2.0","platforms":{"redhat":">= 0.0.0","centos":">= 0.0.0","scientific":">= 0.0.0","oracle":">= 0.0.0","fedora":">= 0.0.0","ubuntu":">= 0.0.0","debian":">= 0.0.0","linuxmint":">= 0.0.0","suse":">= 0.0.0","opensuse":">= 0.0.0","opensuseleap":">= 0.0.0","freebsd":">= 0.0.0","netbsd":">= 0.0.0","mac_os_x":">= 0.0.0","solaris2":">= 0.0.0","gentoo":">= 0.0.0","arch":">= 0.0.0","nexus":">= 0.0.0"},"dependencies":{},"recommendations":{},"suggestions":{},"conflicting":{},"providing":{},"replacing":{},"attributes":{},"groupings":{},"recipes":{},"source_url":"https://github.com/lamont-cookbooks/chef_hostname","issues_url":"https://github.com/lamont-cookbooks/chef_hostname/issues","chef_version":[[">= 12.7"]],"ohai_version":[]}